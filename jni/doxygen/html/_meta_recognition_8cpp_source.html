<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Squirrel Pipeline: /Users/rcjohnson/Documents/Securics/squirrel_pipeline/jni/onevsetSVM/MetaRecognition.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Squirrel Pipeline
   &#160;<span id="projectnumber">.01</span>
   </div>
   <div id="projectbrief">Pipeline for squirrel recognition</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.1.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Macros</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_5a315a4745cdb7d8d17b6a1c20a32ec0.html">onevsetSVM</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">MetaRecognition.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="_meta_recognition_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> * MetaRecognition.cpp</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> * Copyright 2011, Securics Inc.</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">   See accompanying LICENSE agrement for details on rights.</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">Parts of this technology are subject to SBIR data rights and as described in DFARS 252.227-7018 (June 1995) SBIR Data Rights which apply to Contract Number: N00014-11-C-0243 and STTR N00014-07-M-0421 to Securics Inc, 1870 Austin Bluffs Parkway, Colorado Springs, CO 80918</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">The Government&#39;s rights to use, modify, reproduce, release, perform, display, or disclose technical data or computer software marked with this legend are restricted during the period shown as provided in paragraph (b)(4) of the Rights in Noncommercial Technical Data and Computer Software-Small Business Innovative Research (SBIR) Program clause contained in the above identified contract.  Expiration of SBIR Data Rights: Expires four years after completion of the above cited project work for this or any other follow-on SBIR contract, whichever is later.</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">No restrictions on government use apply after the expiration date shown above.  Any reproduction of technical data, computer software, or portions thereof marked with this legend must also reproduce the markings.</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">*/</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="_meta_recognition_8h.html">MetaRecognition.h</a>&quot;</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="preprocessor">#include &lt;string.h&gt;</span> </div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="preprocessor">#include &lt;stdlib.h&gt;</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">int</span> <a class="code" href="_meta_recognition_8cpp.html#af1a9aad2ffb1974415c6cdcba137d529">weibull_fit_verbose_debug</a>;</div>
<div class="line"><a name="l00053"></a><span class="lineno"><a class="code" href="class_meta_recognition.html#a0246646895e293ec1064d0d6e5680ad0">   53</a></span>&#160;<a class="code" href="class_meta_recognition.html#a0246646895e293ec1064d0d6e5680ad0">MetaRecognition::MetaRecognition</a>(<span class="keywordtype">int</span> scores_to_dropx,  <span class="keywordtype">int</span> fitting_sizex, <span class="keywordtype">bool</span> verb, <span class="keywordtype">double</span> alphax, <span class="keywordtype">int</span> translate_amountx):</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;  scores_to_drop(scores_to_dropx),<a class="code" href="svm-predict_8cpp.html#ab3f078684998b83967d507d0f453f454">verbose</a>(verb),fitting_size(fitting_sizex),alpha(alphax),translate_amount(translate_amountx)</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;{</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;  memset(<a class="code" href="class_meta_recognition.html#a6de21bd4985e0f490c29c078ad0fb90c" title="parameters of the Weibull, scale then shape">parmhat</a>,0,<span class="keyword">sizeof</span>(<a class="code" href="class_meta_recognition.html#a6de21bd4985e0f490c29c078ad0fb90c" title="parameters of the Weibull, scale then shape">parmhat</a>));</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;  memset(<a class="code" href="class_meta_recognition.html#adbe803946c691c51104ab932c89266e6" title="confidence interval for parms scale high, scale low, shape high, shape low">parmci</a>,0,<span class="keyword">sizeof</span>(<a class="code" href="class_meta_recognition.html#adbe803946c691c51104ab932c89266e6" title="confidence interval for parms scale high, scale low, shape high, shape low">parmci</a>));</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;  <a class="code" href="class_meta_recognition.html#af25a4fe60686937baaf22aea1086c054" title="sign is postive is larger is better, negative means orginally smaller was better (we transformed for ...">sign</a> = 1;</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;  <a class="code" href="class_meta_recognition.html#af64e8073cc0e2bb2bce44baae50261ad" title="the smallest score, so all fitting data is consistently postive. part of our transform">small_score</a>=0;</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;  <a class="code" href="class_meta_recognition.html#a0b25afe3e4095c6bf3184e3838b738e1" title="is the parameters in the object valid. private:">isvalid</a>=<span class="keyword">false</span>;</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;  <span class="keywordflow">if</span>(verb) <a class="code" href="_meta_recognition_8cpp.html#af1a9aad2ffb1974415c6cdcba137d529">weibull_fit_verbose_debug</a>=1;</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;  <span class="keywordflow">else</span> <a class="code" href="_meta_recognition_8cpp.html#af1a9aad2ffb1974415c6cdcba137d529">weibull_fit_verbose_debug</a>=0;</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;}</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;</div>
<div class="line"><a name="l00065"></a><span class="lineno"><a class="code" href="class_meta_recognition.html#a5ded188b2780c18dc5eec8f61c7c984d">   65</a></span>&#160;<a class="code" href="class_meta_recognition.html#a5ded188b2780c18dc5eec8f61c7c984d">MetaRecognition::~MetaRecognition</a>()</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;{</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;  <span class="comment">//  free(parmhat);</span></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;  <span class="comment">//  free(parmci);</span></div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;}</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;</div>
<div class="line"><a name="l00071"></a><span class="lineno"><a class="code" href="class_meta_recognition.html#ad323b89326ad905a469308b419f61a93">   71</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="class_meta_recognition.html#ad323b89326ad905a469308b419f61a93" title="is this object valid..i.e. has data been properly fit to determine parameters.">MetaRecognition::is_valid</a>(){</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="class_meta_recognition.html#a0b25afe3e4095c6bf3184e3838b738e1" title="is the parameters in the object valid. private:">isvalid</a>;</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;}</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;</div>
<div class="line"><a name="l00075"></a><span class="lineno"><a class="code" href="class_meta_recognition.html#a72c2bc1a0f0ab387d56b14e5517f5878">   75</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_meta_recognition.html#a72c2bc1a0f0ab387d56b14e5517f5878" title="Change translate_amount to x, invalidates object.">MetaRecognition::set_translate</a>(<span class="keywordtype">double</span> t){</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;  <a class="code" href="class_meta_recognition.html#aca806c6373de29b8256427d0ab50148b" title="we transform data so all fittng data data is positive and bigger is better, this predefined constant ...">translate_amount</a> = t;</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;  <a class="code" href="class_meta_recognition.html#a0b25afe3e4095c6bf3184e3838b738e1" title="is the parameters in the object valid. private:">isvalid</a>=<span class="keyword">false</span>;</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;};</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;</div>
<div class="line"><a name="l00081"></a><span class="lineno"><a class="code" href="class_meta_recognition.html#ae5739ee993c81aae6a055c1501d85609">   81</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_meta_recognition.html#ae5739ee993c81aae6a055c1501d85609" title="reset to &quot;invalid&quot; state">MetaRecognition::Reset</a>(){</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;  memset(<a class="code" href="class_meta_recognition.html#a6de21bd4985e0f490c29c078ad0fb90c" title="parameters of the Weibull, scale then shape">parmhat</a>,0,<span class="keyword">sizeof</span>(<a class="code" href="class_meta_recognition.html#a6de21bd4985e0f490c29c078ad0fb90c" title="parameters of the Weibull, scale then shape">parmhat</a>));</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;  memset(<a class="code" href="class_meta_recognition.html#adbe803946c691c51104ab932c89266e6" title="confidence interval for parms scale high, scale low, shape high, shape low">parmci</a>,0,<span class="keyword">sizeof</span>(<a class="code" href="class_meta_recognition.html#adbe803946c691c51104ab932c89266e6" title="confidence interval for parms scale high, scale low, shape high, shape low">parmci</a>));</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;  <a class="code" href="class_meta_recognition.html#af25a4fe60686937baaf22aea1086c054" title="sign is postive is larger is better, negative means orginally smaller was better (we transformed for ...">sign</a> = 1;</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;  <a class="code" href="class_meta_recognition.html#aa686c9468fbd68bc6bc13331cc536811" title="when fitting for recognition prediction, how many top score are hypothesized to be a match...">scores_to_drop</a> = 0;</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;  <a class="code" href="class_meta_recognition.html#af64e8073cc0e2bb2bce44baae50261ad" title="the smallest score, so all fitting data is consistently postive. part of our transform">small_score</a>=0;</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;  <a class="code" href="class_meta_recognition.html#a0b25afe3e4095c6bf3184e3838b738e1" title="is the parameters in the object valid. private:">isvalid</a>=<span class="keyword">false</span>;</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;}</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;</div>
<div class="line"><a name="l00091"></a><span class="lineno"><a class="code" href="_meta_recognition_8cpp.html#a3490d2eede5f89ab9aa5363404113efc">   91</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="_meta_recognition_8cpp.html#a3490d2eede5f89ab9aa5363404113efc">compare_sort_decending</a> (<span class="keyword">const</span> <span class="keywordtype">void</span> * a, <span class="keyword">const</span> <span class="keywordtype">void</span> * b)</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;{</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">double</span> *da = (<span class="keyword">const</span> <span class="keywordtype">double</span> *) a;</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">double</span> *db = (<span class="keyword">const</span> <span class="keywordtype">double</span> *) b;</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;        <span class="keywordflow">return</span>  (*da &lt; *db) - (*da &gt; *db);</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;}</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;</div>
<div class="line"><a name="l00098"></a><span class="lineno"><a class="code" href="_meta_recognition_8cpp.html#ae382ebb3b5774738d5cb28da645142f1">   98</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="_meta_recognition_8cpp.html#ae382ebb3b5774738d5cb28da645142f1">compare_sort_assending</a> (<span class="keyword">const</span> <span class="keywordtype">void</span> * a, <span class="keyword">const</span> <span class="keywordtype">void</span> * b)</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;{</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">double</span> *da = (<span class="keyword">const</span> <span class="keywordtype">double</span> *) a;</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">double</span> *db = (<span class="keyword">const</span> <span class="keywordtype">double</span> *) b;</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;        <span class="keywordflow">return</span>   (*da &gt; *db) - (*da &lt; *db);</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;}</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;</div>
<div class="line"><a name="l00105"></a><span class="lineno"><a class="code" href="_meta_recognition_8cpp.html#ac93e74dd234bdc36d781d21391123312">  105</a></span>&#160;<span class="keyword">inline</span> <span class="keyword">const</span> <span class="keywordtype">char</span> * <span class="keyword">const</span> <a class="code" href="_meta_recognition_8cpp.html#ac93e74dd234bdc36d781d21391123312">BoolToString</a>(<span class="keywordtype">bool</span> b)</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;{</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;        <span class="keywordflow">return</span> b ? <span class="stringliteral">&quot;true&quot;</span> : <span class="stringliteral">&quot;false&quot;</span>;</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;}</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;</div>
<div class="line"><a name="l00110"></a><span class="lineno"><a class="code" href="_meta_recognition_8cpp.html#a99d403c71c3243869f118c5e48bd8dd4">  110</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">int</span>  <span class="keyword">const</span> <a class="code" href="_meta_recognition_8cpp.html#a99d403c71c3243869f118c5e48bd8dd4">BoolToInt</a>(<span class="keywordtype">bool</span> b)</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;{</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;        <span class="keywordflow">return</span> b ? 1 : 0;</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;}</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;</div>
<div class="line"><a name="l00115"></a><span class="lineno"><a class="code" href="_meta_recognition_8cpp.html#a087113d1a8e694347182ee18d2464b1b">  115</a></span>&#160;<span class="keyword">inline</span> <span class="keyword">const</span> <span class="keywordtype">bool</span> <a class="code" href="_meta_recognition_8cpp.html#a087113d1a8e694347182ee18d2464b1b">IntToBool</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> * s)</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;{</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;  <span class="keywordtype">int</span> val= atoi(s);</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;  <span class="keywordflow">if</span>(val) <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;}</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;<span class="comment">//Wraps calls to real weibull_inv and weibull_cdf functions and handles properly translating the data passed</span></div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;<span class="comment">//May eventually be a good idea to move real implementations of the functions here</span></div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;<span class="comment">//IF we do away with the C implementation. For now this allows for backward compantiblity with</span></div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;<span class="comment">//older code</span></div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;<span class="comment">// Inv computes the scores of the inverse CDF, i.e. returns y such that  CDF(y) = </span></div>
<div class="line"><a name="l00127"></a><span class="lineno"><a class="code" href="class_meta_recognition.html#a29f521916dabf222e911c549f175eab4">  127</a></span>&#160;<span class="keywordtype">double</span> <a class="code" href="class_meta_recognition.html#a29f521916dabf222e911c549f175eab4" title="This is score for which one would obtain CDF probability p (i.e. x such that p = CDF(x))">MetaRecognition::Inv</a>(<span class="keywordtype">double</span> <a class="code" href="svm-predict_8cpp.html#a9a5b72a4065074cac5da07efb80a1e79">x</a>)</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;{</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;  <span class="keywordflow">if</span>(!<a class="code" href="class_meta_recognition.html#a0b25afe3e4095c6bf3184e3838b738e1" title="is the parameters in the object valid. private:">isvalid</a>) <span class="keywordflow">return</span> -9999.0;</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;  <span class="keywordtype">double</span> score = <a class="code" href="weibull_8cpp.html#a10654c6de021f056fa213203a6c0d0cb">weibull_inv</a>(x, <a class="code" href="class_meta_recognition.html#a6de21bd4985e0f490c29c078ad0fb90c" title="parameters of the Weibull, scale then shape">parmhat</a>[0], <a class="code" href="class_meta_recognition.html#a6de21bd4985e0f490c29c078ad0fb90c" title="parameters of the Weibull, scale then shape">parmhat</a>[1]);</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;  <span class="keywordflow">return</span> (score - <a class="code" href="class_meta_recognition.html#aca806c6373de29b8256427d0ab50148b" title="we transform data so all fittng data data is positive and bigger is better, this predefined constant ...">translate_amount</a> + <a class="code" href="class_meta_recognition.html#af64e8073cc0e2bb2bce44baae50261ad" title="the smallest score, so all fitting data is consistently postive. part of our transform">small_score</a>)*<a class="code" href="class_meta_recognition.html#af25a4fe60686937baaf22aea1086c054" title="sign is postive is larger is better, negative means orginally smaller was better (we transformed for ...">sign</a>;</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;}</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;</div>
<div class="line"><a name="l00134"></a><span class="lineno"><a class="code" href="class_meta_recognition.html#a001d8edeeeb42a668d7811401db2c781">  134</a></span>&#160;<span class="keywordtype">double</span> <a class="code" href="class_meta_recognition.html#a001d8edeeeb42a668d7811401db2c781" title="This is the cummumlative probablity of match being corrrect (or more precisely the probility the scor...">MetaRecognition::CDF</a>(<span class="keywordtype">double</span> <a class="code" href="svm-predict_8cpp.html#a9a5b72a4065074cac5da07efb80a1e79">x</a>)</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;{</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;  <span class="keywordflow">if</span>(!<a class="code" href="class_meta_recognition.html#a0b25afe3e4095c6bf3184e3838b738e1" title="is the parameters in the object valid. private:">isvalid</a>) <span class="keywordflow">return</span> -9999.0;</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;  <span class="keywordtype">double</span> translated_x = x*<a class="code" href="class_meta_recognition.html#af25a4fe60686937baaf22aea1086c054" title="sign is postive is larger is better, negative means orginally smaller was better (we transformed for ...">sign</a> + <a class="code" href="class_meta_recognition.html#aca806c6373de29b8256427d0ab50148b" title="we transform data so all fittng data data is positive and bigger is better, this predefined constant ...">translate_amount</a> - <a class="code" href="class_meta_recognition.html#af64e8073cc0e2bb2bce44baae50261ad" title="the smallest score, so all fitting data is consistently postive. part of our transform">small_score</a>;</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="weibull_8cpp.html#a5676fa7821d22c891641b5ae750edbb7">weibull_cdf</a>(translated_x, <a class="code" href="class_meta_recognition.html#a6de21bd4985e0f490c29c078ad0fb90c" title="parameters of the Weibull, scale then shape">parmhat</a>[0], <a class="code" href="class_meta_recognition.html#a6de21bd4985e0f490c29c078ad0fb90c" title="parameters of the Weibull, scale then shape">parmhat</a>[1]);</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;};</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;</div>
<div class="line"><a name="l00141"></a><span class="lineno"><a class="code" href="class_meta_recognition.html#a9280adf535962c067ae7a753d3f8236b">  141</a></span>&#160;<span class="keywordtype">double</span> <a class="code" href="class_meta_recognition.html#a9280adf535962c067ae7a753d3f8236b" title="This is the commonly used function.. after fitting, it returns the probability of the given score bei...">MetaRecognition::W_score</a>(<span class="keywordtype">double</span> <a class="code" href="svm-predict_8cpp.html#a9a5b72a4065074cac5da07efb80a1e79">x</a>){</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="class_meta_recognition.html#a001d8edeeeb42a668d7811401db2c781" title="This is the cummumlative probablity of match being corrrect (or more precisely the probility the scor...">CDF</a>(x);</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;};</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;</div>
<div class="line"><a name="l00145"></a><span class="lineno"><a class="code" href="class_meta_recognition.html#af4ee86d4bb52c0d3da39486097a33c05">  145</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="class_meta_recognition.html#af4ee86d4bb52c0d3da39486097a33c05" title="Is X from the &quot;match&quot; distribution (i.e. we reject null hypothesis of non-match),.">MetaRecognition::Predict_Match</a>(<span class="keywordtype">double</span> <a class="code" href="svm-predict_8cpp.html#a9a5b72a4065074cac5da07efb80a1e79">x</a>, <span class="keywordtype">double</span> threshold){</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;  <span class="keywordtype">double</span> score = <a class="code" href="class_meta_recognition.html#a29f521916dabf222e911c549f175eab4" title="This is score for which one would obtain CDF probability p (i.e. x such that p = CDF(x))">Inv</a>(threshold);</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="class_meta_recognition.html#af25a4fe60686937baaf22aea1086c054" title="sign is postive is larger is better, negative means orginally smaller was better (we transformed for ...">sign</a> &lt;0)   <span class="keywordflow">return</span> (x &lt; score);</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;  <span class="keywordflow">return</span> (x &gt; score);</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;};</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;</div>
<div class="line"><a name="l00151"></a><span class="lineno"><a class="code" href="class_meta_recognition.html#afbff4e20ea68fbf2d96ca421870a1b91">  151</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="class_meta_recognition.html#afbff4e20ea68fbf2d96ca421870a1b91" title="W-score Renormalize the vecotor invec[0:length-1] into outvec (in and out can be same) return is 1 fo...">MetaRecognition::ReNormalize</a>(<span class="keywordtype">double</span> *invec, <span class="keywordtype">double</span> *outvec, <span class="keywordtype">int</span> length)</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;{</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;  <span class="keywordflow">if</span>(!<a class="code" href="class_meta_recognition.html#a0b25afe3e4095c6bf3184e3838b738e1" title="is the parameters in the object valid. private:">isvalid</a>) <span class="keywordflow">return</span> -9997.0;</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;  <span class="keywordtype">int</span> rval=1;</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;  <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt; length; i++){</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    outvec[i] = <a class="code" href="class_meta_recognition.html#a9280adf535962c067ae7a753d3f8236b" title="This is the commonly used function.. after fitting, it returns the probability of the given score bei...">W_score</a>(invec[i]);</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;  }</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;}</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;<span class="comment">//used by weibull__evt_low and weibull__evt_high, which sets the desired sign(low -1, high 1)</span></div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;<span class="comment">//before passing to generic</span></div>
<div class="line"><a name="l00163"></a><span class="lineno"><a class="code" href="class_meta_recognition.html#a53b37e292bf47eaec412507ab57fcc0a">  163</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="class_meta_recognition.html#a53b37e292bf47eaec412507ab57fcc0a">MetaRecognition::EvtGeneric</a>(<span class="keywordtype">double</span>* inputData, <span class="keywordtype">int</span> inputDataSize, <span class="keywordtype">int</span> inward, <span class="keywordtype">double</span> <a class="code" href="svm-predict_8cpp.html#a9a5b72a4065074cac5da07efb80a1e79">x</a>)</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;{</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;  <span class="keywordtype">double</span> * inputDataCopy = (<span class="keywordtype">double</span> *) malloc(<span class="keyword">sizeof</span>(<span class="keywordtype">double</span>) * inputDataSize);</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;  <span class="keywordtype">double</span> * dataPtr = NULL;</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;  <span class="keywordtype">int</span> icnt=0;</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;  <span class="keywordflow">if</span>(!inward &amp;&amp; (<a class="code" href="class_meta_recognition.html#af25a4fe60686937baaf22aea1086c054" title="sign is postive is larger is better, negative means orginally smaller was better (we transformed for ...">sign</a> &gt; 0) ) {</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    icnt = inputDataSize;</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    memcpy(inputDataCopy,inputData, inputDataSize*<span class="keyword">sizeof</span>(<span class="keywordtype">double</span>));</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;  }</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;  <span class="keywordflow">if</span>(!inward &amp;&amp; (<a class="code" href="class_meta_recognition.html#af25a4fe60686937baaf22aea1086c054" title="sign is postive is larger is better, negative means orginally smaller was better (we transformed for ...">sign</a> &lt; 0) ){</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i &lt; inputDataSize; i++)       inputDataCopy[i] = (inputData[i]*<a class="code" href="class_meta_recognition.html#af25a4fe60686937baaf22aea1086c054" title="sign is postive is larger is better, negative means orginally smaller was better (we transformed for ...">sign</a>);       <span class="comment">//doing extremes just flip sign if needed</span></div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    icnt = inputDataSize;</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;  }</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span>(inward  &amp;&amp; (<a class="code" href="class_meta_recognition.html#af25a4fe60686937baaf22aea1086c054" title="sign is postive is larger is better, negative means orginally smaller was better (we transformed for ...">sign</a> &lt; 0)) { <span class="comment">/* this is fit above x but  approaching x */</span> </div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i &lt; inputDataSize; i++)       {</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;      <span class="keywordflow">if</span>(inputData[i] &gt; x) {</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;        inputDataCopy[icnt++] = (inputData[i]*<a class="code" href="class_meta_recognition.html#af25a4fe60686937baaf22aea1086c054" title="sign is postive is larger is better, negative means orginally smaller was better (we transformed for ...">sign</a>);       <span class="comment">//copy what is above x, and flip signs (so biggest is important)</span></div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;      } </div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    }</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span>(inward  &amp;&amp; (<a class="code" href="class_meta_recognition.html#af25a4fe60686937baaf22aea1086c054" title="sign is postive is larger is better, negative means orginally smaller was better (we transformed for ...">sign</a> &gt; 0)) { <span class="comment">/* this is fit below x but  approaching x */</span> </div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;      <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i &lt; inputDataSize; i++)       {</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;        <span class="keywordflow">if</span>(inputData[i] &lt; x) {</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;          inputDataCopy[icnt++] = (inputData[i]);       <span class="comment">//copy only what is above x. </span></div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;        } </div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;      }</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;  } </div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;  <span class="comment">//sort data and get smallest score</span></div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;  qsort(inputDataCopy, icnt , <span class="keyword">sizeof</span>(<span class="keywordtype">double</span>), <a class="code" href="_meta_recognition_8cpp.html#a3490d2eede5f89ab9aa5363404113efc">compare_sort_decending</a>);</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;  <span class="comment">//Want only the top fitting_size scores but als noneed to adap if dropping top score</span></div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="class_meta_recognition.html#aa686c9468fbd68bc6bc13331cc536811" title="when fitting for recognition prediction, how many top score are hypothesized to be a match...">scores_to_drop</a>&gt;0){</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    dataPtr=inputDataCopy+<a class="code" href="class_meta_recognition.html#aa686c9468fbd68bc6bc13331cc536811" title="when fitting for recognition prediction, how many top score are hypothesized to be a match...">scores_to_drop</a>;</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    dataPtr=inputDataCopy;</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;  }</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;  <a class="code" href="class_meta_recognition.html#af64e8073cc0e2bb2bce44baae50261ad" title="the smallest score, so all fitting data is consistently postive. part of our transform">small_score</a> = dataPtr[<a class="code" href="class_meta_recognition.html#a1023b0e67708b18ca86f7f0d22541c6d" title="tail size for fitting in any of the FitXX functions">fitting_size</a>-1];</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;  </div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;  <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i &lt; <a class="code" href="class_meta_recognition.html#a1023b0e67708b18ca86f7f0d22541c6d" title="tail size for fitting in any of the FitXX functions">fitting_size</a>; i++)</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    {   </div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;      <span class="comment">//translate and subtract small score</span></div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;      dataPtr[i] = dataPtr[i] + <a class="code" href="class_meta_recognition.html#aca806c6373de29b8256427d0ab50148b" title="we transform data so all fittng data data is positive and bigger is better, this predefined constant ...">translate_amount</a> - <a class="code" href="class_meta_recognition.html#af64e8073cc0e2bb2bce44baae50261ad" title="the smallest score, so all fitting data is consistently postive. part of our transform">small_score</a>;</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    }</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;  </div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160; </div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;  <span class="keywordtype">int</span> rval =   <a class="code" href="weibull_8cpp.html#ae45643de52e8682e9a4ae59ec6d77c42">weibull_fit</a>(<a class="code" href="class_meta_recognition.html#a6de21bd4985e0f490c29c078ad0fb90c" title="parameters of the Weibull, scale then shape">parmhat</a>, <a class="code" href="class_meta_recognition.html#adbe803946c691c51104ab932c89266e6" title="confidence interval for parms scale high, scale low, shape high, shape low">parmci</a>, dataPtr, <a class="code" href="class_meta_recognition.html#a6f5412431e6d17949d48ca2f0dcee437" title="parameter for estimation of size of confidence interval">alpha</a>, fitting_size);</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;  <a class="code" href="class_meta_recognition.html#a0b25afe3e4095c6bf3184e3838b738e1" title="is the parameters in the object valid. private:">isvalid</a>= <span class="keyword">true</span>;</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;  <span class="keywordflow">if</span>(rval != 1) <a class="code" href="class_meta_recognition.html#ae5739ee993c81aae6a055c1501d85609" title="reset to &quot;invalid&quot; state">Reset</a>();</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;  free(inputDataCopy);</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;  <span class="keywordflow">return</span> rval;</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;}</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;<span class="comment">//Wrapper fitting functions EvtLow and EvtHigh to make it simpler for new users of the library.</span></div>
<div class="line"><a name="l00218"></a><span class="lineno"><a class="code" href="class_meta_recognition.html#ac5ccbad6727a464df72e743c27a0be80">  218</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="class_meta_recognition.html#ac5ccbad6727a464df72e743c27a0be80">MetaRecognition::FitLow</a>(<span class="keywordtype">double</span>* inputData, <span class="keywordtype">int</span> inputDataSize)</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;{</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;        <a class="code" href="class_meta_recognition.html#af25a4fe60686937baaf22aea1086c054" title="sign is postive is larger is better, negative means orginally smaller was better (we transformed for ...">sign</a> = -1;</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="class_meta_recognition.html#a53b37e292bf47eaec412507ab57fcc0a">EvtGeneric</a>(inputData, inputDataSize);</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;}</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;</div>
<div class="line"><a name="l00224"></a><span class="lineno"><a class="code" href="class_meta_recognition.html#a40386f63ea6a8088cffc54505d959afb">  224</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="class_meta_recognition.html#a40386f63ea6a8088cffc54505d959afb">MetaRecognition::FitHigh</a>(<span class="keywordtype">double</span>* inputData, <span class="keywordtype">int</span> inputDataSize)</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;{</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;        <a class="code" href="class_meta_recognition.html#af25a4fe60686937baaf22aea1086c054" title="sign is postive is larger is better, negative means orginally smaller was better (we transformed for ...">sign</a> = 1;</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="class_meta_recognition.html#a53b37e292bf47eaec412507ab57fcc0a">EvtGeneric</a>(inputData, inputDataSize);</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;}</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;</div>
<div class="line"><a name="l00230"></a><span class="lineno"><a class="code" href="class_meta_recognition.html#ad040c8334ffb7af7ea8e777cdfeb56c8">  230</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="class_meta_recognition.html#ad040c8334ffb7af7ea8e777cdfeb56c8">MetaRecognition::FitSVM</a>(<a class="code" href="structsvm__node__libsvm.html" title="structure for svm data used by libSVM, used to allow easy MetaRecognition for SVM results (used as an...">svm_node_libsvm</a>* SVMdata, <span class="keywordtype">int</span> inputDataSize, <span class="keywordtype">int</span> label_of_interest, <span class="keywordtype">bool</span> label_has_positive_score, <span class="keywordtype">bool</span> reject_complement)</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;{</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;  <a class="code" href="class_meta_recognition.html#ae5739ee993c81aae6a055c1501d85609" title="reset to &quot;invalid&quot; state">Reset</a>();</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;  <span class="keywordtype">double</span> * inputDataCopy = (<span class="keywordtype">double</span> *) malloc(<span class="keyword">sizeof</span>(<span class="keywordtype">double</span>) * inputDataSize);</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;  <span class="keywordtype">int</span> sign_of_label_of_interest=0;</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;  <span class="keywordtype">double</span> * dataPtr = NULL;</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;  <span class="keywordtype">int</span> sign_of_expected_score=-1;</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;  <span class="keywordflow">if</span>(label_has_positive_score) sign_of_expected_score=1;</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;  <span class="keywordtype">int</span> icnt=0;</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;  <span class="keywordflow">if</span>(reject_complement) {  <span class="comment">// default we fit on the complement class and then do rejection to determine probability</span></div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i &lt; inputDataSize; i++) {</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;      <span class="keywordflow">if</span>(SVMdata[i].index != label_of_interest) inputDataCopy[icnt++] = (SVMdata[i].<a class="code" href="structsvm__node__libsvm.html#ae2fde3a320d666dccbeb18aa701d6d81" title="the SVM decision score">value</a>);       <span class="comment">//doing extremes just flip sign if needed</span></div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;      <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;        <span class="keywordflow">if</span>(SVMdata[i].value &gt;0) sign_of_label_of_interest++;</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;        <span class="keywordflow">else</span> sign_of_label_of_interest--;</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;      }</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    }</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i &lt; inputDataSize; i++) {</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;      <span class="keywordflow">if</span>(SVMdata[i].index == label_of_interest) inputDataCopy[icnt++] = (SVMdata[i].<a class="code" href="structsvm__node__libsvm.html#ae2fde3a320d666dccbeb18aa701d6d81" title="the SVM decision score">value</a>);       <span class="comment">//doing extremes just flip sign if needed</span></div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;      <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;        <span class="keywordflow">if</span>(SVMdata[i].value &gt;0) sign_of_label_of_interest++;</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;        <span class="keywordflow">else</span> sign_of_label_of_interest--;</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;      }</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    }</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;  }</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="class_meta_recognition.html#a0828dd3412041d9a19cfac31dd0bbe4d">verbose</a> &amp;&amp; sign_of_label_of_interest * sign_of_expected_score &lt;= 0){</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    printf(<span class="stringliteral">&quot;In MetaRecognition::FitSVM,  warning: possible inconsistency average of data to fit has score %d, but expected core is %d\n&quot;</span>,</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;           sign_of_label_of_interest, sign_of_expected_score);</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;  }</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;  <span class="comment">/* expected sign combines with reject_complement to determine if we have to flip or not.</span></div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;<span class="comment">     We flip if positives scores, with smaller is better, is the goal, </span></div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;<span class="comment">     we flip if sign_of_expected_score &gt;0 and !force_rejection</span></div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;<span class="comment">     we flip if sign_of_expected_score &lt;0 and force_rejection */</span></div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;  <span class="keywordflow">if</span>((!label_has_positive_score  &amp;&amp; reject_complement)</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;     || (label_has_positive_score  &amp;&amp; !reject_complement)) {</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    <a class="code" href="class_meta_recognition.html#af25a4fe60686937baaf22aea1086c054" title="sign is postive is larger is better, negative means orginally smaller was better (we transformed for ...">sign</a> = -1;</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i &lt; icnt; i++) {</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;      inputDataCopy[i] *= -1;       <span class="comment">//doing extremes just flip sign if needed</span></div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    }</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;  } <span class="keywordflow">else</span> <a class="code" href="class_meta_recognition.html#af25a4fe60686937baaf22aea1086c054" title="sign is postive is larger is better, negative means orginally smaller was better (we transformed for ...">sign</a>=1;</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;  <span class="comment">//sort data and get smallest score</span></div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;  qsort(inputDataCopy, icnt , <span class="keyword">sizeof</span>(<span class="keywordtype">double</span>), <a class="code" href="_meta_recognition_8cpp.html#a3490d2eede5f89ab9aa5363404113efc">compare_sort_decending</a>);</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;  <span class="comment">//Want only the top fitting_size scores but als noneed to adap if dropping top score</span></div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="class_meta_recognition.html#aa686c9468fbd68bc6bc13331cc536811" title="when fitting for recognition prediction, how many top score are hypothesized to be a match...">scores_to_drop</a>){</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    dataPtr=inputDataCopy+<a class="code" href="class_meta_recognition.html#aa686c9468fbd68bc6bc13331cc536811" title="when fitting for recognition prediction, how many top score are hypothesized to be a match...">scores_to_drop</a>;</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    dataPtr=inputDataCopy;</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;  }</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;  <a class="code" href="class_meta_recognition.html#af64e8073cc0e2bb2bce44baae50261ad" title="the smallest score, so all fitting data is consistently postive. part of our transform">small_score</a> = dataPtr[<a class="code" href="class_meta_recognition.html#a1023b0e67708b18ca86f7f0d22541c6d" title="tail size for fitting in any of the FitXX functions">fitting_size</a> - 1];</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;  </div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;  <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i &lt; <a class="code" href="class_meta_recognition.html#a1023b0e67708b18ca86f7f0d22541c6d" title="tail size for fitting in any of the FitXX functions">fitting_size</a>; i++)</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    {   </div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;      <span class="comment">//translate and subtract small score</span></div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;      dataPtr[i] = dataPtr[i] + <a class="code" href="class_meta_recognition.html#aca806c6373de29b8256427d0ab50148b" title="we transform data so all fittng data data is positive and bigger is better, this predefined constant ...">translate_amount</a> - <a class="code" href="class_meta_recognition.html#af64e8073cc0e2bb2bce44baae50261ad" title="the smallest score, so all fitting data is consistently postive. part of our transform">small_score</a>;</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    }</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;  </div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;  </div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;  <span class="keywordtype">int</span> rval = <a class="code" href="weibull_8cpp.html#ae45643de52e8682e9a4ae59ec6d77c42">weibull_fit</a>(<a class="code" href="class_meta_recognition.html#a6de21bd4985e0f490c29c078ad0fb90c" title="parameters of the Weibull, scale then shape">parmhat</a>, <a class="code" href="class_meta_recognition.html#adbe803946c691c51104ab932c89266e6" title="confidence interval for parms scale high, scale low, shape high, shape low">parmci</a>, dataPtr, <a class="code" href="class_meta_recognition.html#a6f5412431e6d17949d48ca2f0dcee437" title="parameter for estimation of size of confidence interval">alpha</a>, fitting_size);</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;  <a class="code" href="class_meta_recognition.html#a0b25afe3e4095c6bf3184e3838b738e1" title="is the parameters in the object valid. private:">isvalid</a>= <span class="keyword">true</span>;</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;  <span class="keywordflow">if</span>(rval != 1) <a class="code" href="class_meta_recognition.html#ae5739ee993c81aae6a055c1501d85609" title="reset to &quot;invalid&quot; state">Reset</a>();</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;  free(inputDataCopy);</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;  <span class="keywordflow">return</span> rval;</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;};</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;</div>
<div class="line"><a name="l00302"></a><span class="lineno"><a class="code" href="class_meta_recognition.html#a8b0b10523b3180fc5ace82ac2fcba4bb">  302</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_meta_recognition.html#a8b0b10523b3180fc5ace82ac2fcba4bb" title="various I/O functions">MetaRecognition::Save</a>(std::ostream &amp;outputStream)<span class="keyword"> const</span></div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;        <span class="keywordflow">if</span>(outputStream.good() &amp;&amp; <a class="code" href="class_meta_recognition.html#a0b25afe3e4095c6bf3184e3838b738e1" title="is the parameters in the object valid. private:">isvalid</a>)</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;        {</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;                <span class="keywordflow">try</span> {</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;                outputStream.precision(21);</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;                outputStream.setf(std::ios::scientific,std::ios::floatfield); </div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;                outputStream &lt;&lt; <a class="code" href="class_meta_recognition.html#a6de21bd4985e0f490c29c078ad0fb90c" title="parameters of the Weibull, scale then shape">parmhat</a>[0] &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; <a class="code" href="class_meta_recognition.html#a6de21bd4985e0f490c29c078ad0fb90c" title="parameters of the Weibull, scale then shape">parmhat</a>[1] &lt;&lt;   <span class="stringliteral">&quot;  &quot;</span>  </div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;                                        &lt;&lt; <a class="code" href="class_meta_recognition.html#adbe803946c691c51104ab932c89266e6" title="confidence interval for parms scale high, scale low, shape high, shape low">parmci</a>[0] &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; <a class="code" href="class_meta_recognition.html#adbe803946c691c51104ab932c89266e6" title="confidence interval for parms scale high, scale low, shape high, shape low">parmci</a>[1] &lt;&lt; <span class="stringliteral">&quot; &quot;</span> </div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;                                        &lt;&lt; <a class="code" href="class_meta_recognition.html#adbe803946c691c51104ab932c89266e6" title="confidence interval for parms scale high, scale low, shape high, shape low">parmci</a>[2] &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; <a class="code" href="class_meta_recognition.html#adbe803946c691c51104ab932c89266e6" title="confidence interval for parms scale high, scale low, shape high, shape low">parmci</a>[3] &lt;&lt; <span class="stringliteral">&quot;  &quot;</span> </div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;                                        &lt;&lt; <a class="code" href="class_meta_recognition.html#af25a4fe60686937baaf22aea1086c054" title="sign is postive is larger is better, negative means orginally smaller was better (we transformed for ...">sign</a> &lt;&lt; <span class="stringliteral">&quot; &quot;</span> </div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;                                        &lt;&lt; <a class="code" href="class_meta_recognition.html#a6f5412431e6d17949d48ca2f0dcee437" title="parameter for estimation of size of confidence interval">alpha</a> &lt;&lt; <span class="stringliteral">&quot; &quot;</span> </div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;                                        &lt;&lt; <a class="code" href="class_meta_recognition.html#a1023b0e67708b18ca86f7f0d22541c6d" title="tail size for fitting in any of the FitXX functions">fitting_size</a> &lt;&lt; <span class="stringliteral">&quot; &quot;</span> </div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;                                        &lt;&lt; <a class="code" href="class_meta_recognition.html#aca806c6373de29b8256427d0ab50148b" title="we transform data so all fittng data data is positive and bigger is better, this predefined constant ...">translate_amount</a> &lt;&lt; <span class="stringliteral">&quot; &quot;</span> </div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;                                        &lt;&lt; <a class="code" href="class_meta_recognition.html#af64e8073cc0e2bb2bce44baae50261ad" title="the smallest score, so all fitting data is consistently postive. part of our transform">small_score</a>&lt;&lt; <span class="stringliteral">&quot; &quot;</span></div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;                                        &lt;&lt; <a class="code" href="class_meta_recognition.html#aa686c9468fbd68bc6bc13331cc536811" title="when fitting for recognition prediction, how many top score are hypothesized to be a match...">scores_to_drop</a></div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;                                        &lt;&lt; std::endl;</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;                } <span class="keywordflow">catch</span>(std::bad_alloc&amp; e) {</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;                        std::cout &lt;&lt; <span class="stringliteral">&quot;Could not allocate the required memory, failed with error: &#39;&quot;</span> &lt;&lt; e.what() &lt;&lt; <span class="stringliteral">&quot;&#39;&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;                }</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;        }</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;}</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;</div>
<div class="line"><a name="l00325"></a><span class="lineno"><a class="code" href="_meta_recognition_8cpp.html#ab0d5f5fa4f0c9375e4799eee2f3ff1bc">  325</a></span>&#160;std::ostream&amp; <a class="code" href="_meta_recognition_8cpp.html#ab0d5f5fa4f0c9375e4799eee2f3ff1bc">operator&lt;&lt; </a>( std::ostream&amp; os, <span class="keyword">const</span> <a class="code" href="class_meta_recognition.html" title="Primary object/methods for tranforming and computing needed for any Meta recogntion task...">MetaRecognition</a>&amp; mr )</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;  {</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    mr.<a class="code" href="class_meta_recognition.html#a8b0b10523b3180fc5ace82ac2fcba4bb" title="various I/O functions">Save</a>(os);</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;  }</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;</div>
<div class="line"><a name="l00330"></a><span class="lineno"><a class="code" href="_meta_recognition_8cpp.html#a803b3f2799c5e62cb2955978cdd850d4">  330</a></span>&#160;std::ostream&amp; <a class="code" href="_meta_recognition_8cpp.html#a803b3f2799c5e62cb2955978cdd850d4">operator&gt;&gt; </a>( std::istream&amp; os, <a class="code" href="class_meta_recognition.html" title="Primary object/methods for tranforming and computing needed for any Meta recogntion task...">MetaRecognition</a>&amp; mr )</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;  {</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    mr.<a class="code" href="class_meta_recognition.html#acd1978cbb87cdda09fd5fc75927d48a2" title="various I/O functions">Load</a>(os);</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;  }</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;</div>
<div class="line"><a name="l00336"></a><span class="lineno"><a class="code" href="class_meta_recognition.html#acd1978cbb87cdda09fd5fc75927d48a2">  336</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_meta_recognition.html#acd1978cbb87cdda09fd5fc75927d48a2" title="various I/O functions">MetaRecognition::Load</a>(std::istream &amp;inputStream)</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;{</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;  <a class="code" href="class_meta_recognition.html#a0b25afe3e4095c6bf3184e3838b738e1" title="is the parameters in the object valid. private:">isvalid</a>=<span class="keyword">false</span>;</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;  <span class="keywordtype">int</span> temp;</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;  <span class="keywordflow">if</span>(inputStream.good())</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    {</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;      inputStream &gt;&gt; <a class="code" href="class_meta_recognition.html#a6de21bd4985e0f490c29c078ad0fb90c" title="parameters of the Weibull, scale then shape">parmhat</a>[0] &gt;&gt; <a class="code" href="class_meta_recognition.html#a6de21bd4985e0f490c29c078ad0fb90c" title="parameters of the Weibull, scale then shape">parmhat</a>[1]</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;                  &gt;&gt; <a class="code" href="class_meta_recognition.html#adbe803946c691c51104ab932c89266e6" title="confidence interval for parms scale high, scale low, shape high, shape low">parmci</a>[0] &gt;&gt; <a class="code" href="class_meta_recognition.html#adbe803946c691c51104ab932c89266e6" title="confidence interval for parms scale high, scale low, shape high, shape low">parmci</a>[1]</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;                  &gt;&gt; <a class="code" href="class_meta_recognition.html#adbe803946c691c51104ab932c89266e6" title="confidence interval for parms scale high, scale low, shape high, shape low">parmci</a>[2] &gt;&gt; <a class="code" href="class_meta_recognition.html#adbe803946c691c51104ab932c89266e6" title="confidence interval for parms scale high, scale low, shape high, shape low">parmci</a>[3]</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;                  &gt;&gt; <a class="code" href="class_meta_recognition.html#af25a4fe60686937baaf22aea1086c054" title="sign is postive is larger is better, negative means orginally smaller was better (we transformed for ...">sign</a> </div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;                  &gt;&gt; <a class="code" href="class_meta_recognition.html#a6f5412431e6d17949d48ca2f0dcee437" title="parameter for estimation of size of confidence interval">alpha</a> </div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;                  &gt;&gt; <a class="code" href="class_meta_recognition.html#a1023b0e67708b18ca86f7f0d22541c6d" title="tail size for fitting in any of the FitXX functions">fitting_size</a> </div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;                  &gt;&gt; <a class="code" href="class_meta_recognition.html#aca806c6373de29b8256427d0ab50148b" title="we transform data so all fittng data data is positive and bigger is better, this predefined constant ...">translate_amount</a> </div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;                  &gt;&gt; <a class="code" href="class_meta_recognition.html#af64e8073cc0e2bb2bce44baae50261ad" title="the smallest score, so all fitting data is consistently postive. part of our transform">small_score</a></div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;                  &gt;&gt; <a class="code" href="class_meta_recognition.html#aa686c9468fbd68bc6bc13331cc536811" title="when fitting for recognition prediction, how many top score are hypothesized to be a match...">scores_to_drop</a>;</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;      <a class="code" href="class_meta_recognition.html#a0b25afe3e4095c6bf3184e3838b738e1" title="is the parameters in the object valid. private:">isvalid</a>=<span class="keyword">true</span>;</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    }</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;}</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;</div>
<div class="line"><a name="l00355"></a><span class="lineno"><a class="code" href="class_meta_recognition.html#acdf9f776ebd6110fd200c5d10ed25e43">  355</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_meta_recognition.html#a8b0b10523b3180fc5ace82ac2fcba4bb" title="various I/O functions">MetaRecognition::Save</a>(FILE *outputFile)<span class="keyword"> const</span></div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;        <span class="keywordflow">if</span>((outputFile != NULL) &amp;&amp; !feof(outputFile))</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;        {</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;          fprintf(outputFile, </div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;                        <span class="stringliteral">&quot;%21.18g %21.18g  &quot;</span> <span class="comment">//parmaht</span></div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;                        <span class="stringliteral">&quot;%21.18g %21.18g &quot;</span> <span class="comment">//parmci </span></div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;                        <span class="stringliteral">&quot;%21.18g %21.18g  &quot;</span></div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;                        <span class="stringliteral">&quot;%d %f %d &quot;</span>  <span class="comment">//sign, alpha, fitting size</span></div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;                        <span class="stringliteral">&quot;%d %21.18g %d\n&quot;</span>, <span class="comment">//translate,  small_score, scores_to_drop</span></div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;                        <a class="code" href="class_meta_recognition.html#a6de21bd4985e0f490c29c078ad0fb90c" title="parameters of the Weibull, scale then shape">parmhat</a>[0], <a class="code" href="class_meta_recognition.html#a6de21bd4985e0f490c29c078ad0fb90c" title="parameters of the Weibull, scale then shape">parmhat</a>[1],</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;                        <a class="code" href="class_meta_recognition.html#adbe803946c691c51104ab932c89266e6" title="confidence interval for parms scale high, scale low, shape high, shape low">parmci</a>[0],<a class="code" href="class_meta_recognition.html#adbe803946c691c51104ab932c89266e6" title="confidence interval for parms scale high, scale low, shape high, shape low">parmci</a>[1],</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;                        <a class="code" href="class_meta_recognition.html#adbe803946c691c51104ab932c89266e6" title="confidence interval for parms scale high, scale low, shape high, shape low">parmci</a>[2],<a class="code" href="class_meta_recognition.html#adbe803946c691c51104ab932c89266e6" title="confidence interval for parms scale high, scale low, shape high, shape low">parmci</a>[3],</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;                        <a class="code" href="class_meta_recognition.html#af25a4fe60686937baaf22aea1086c054" title="sign is postive is larger is better, negative means orginally smaller was better (we transformed for ...">sign</a>, <a class="code" href="class_meta_recognition.html#a6f5412431e6d17949d48ca2f0dcee437" title="parameter for estimation of size of confidence interval">alpha</a>, <a class="code" href="class_meta_recognition.html#a1023b0e67708b18ca86f7f0d22541c6d" title="tail size for fitting in any of the FitXX functions">fitting_size</a>,</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;                        <a class="code" href="class_meta_recognition.html#aca806c6373de29b8256427d0ab50148b" title="we transform data so all fittng data data is positive and bigger is better, this predefined constant ...">translate_amount</a>, <a class="code" href="class_meta_recognition.html#af64e8073cc0e2bb2bce44baae50261ad" title="the smallest score, so all fitting data is consistently postive. part of our transform">small_score</a>, <a class="code" href="class_meta_recognition.html#aa686c9468fbd68bc6bc13331cc536811" title="when fitting for recognition prediction, how many top score are hypothesized to be a match...">scores_to_drop</a>);</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;        }</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;}</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;</div>
<div class="line"><a name="l00373"></a><span class="lineno"><a class="code" href="class_meta_recognition.html#aa8b5ed27e7f6ed30f49b248d5369f182">  373</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_meta_recognition.html#acd1978cbb87cdda09fd5fc75927d48a2" title="various I/O functions">MetaRecognition::Load</a>(FILE *inputFile)</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;{</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;        <span class="keywordtype">int</span> temp;</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;        <span class="keywordtype">int</span> retcode=0;</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;        <a class="code" href="class_meta_recognition.html#a0b25afe3e4095c6bf3184e3838b738e1" title="is the parameters in the object valid. private:">isvalid</a>=<span class="keyword">false</span>;</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;        <span class="keywordflow">if</span>((inputFile != NULL) &amp;&amp; !feof(inputFile))</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;        {</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;          retcode = fscanf(inputFile, </div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;                           <span class="stringliteral">&quot;%lf %lf &quot;</span> <span class="comment">//parmaht</span></div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;                           <span class="stringliteral">&quot;%lf %lf &quot;</span> <span class="comment">//parmci </span></div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;                           <span class="stringliteral">&quot;%lf %lf &quot;</span></div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;                           <span class="stringliteral">&quot;%d %lf %d &quot;</span>  <span class="comment">//sign, alpha, fitting size</span></div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;                           <span class="stringliteral">&quot;%d %lf %d &quot;</span>, <span class="comment">//translate, small_score, scores_to_drop, </span></div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;                           <a class="code" href="class_meta_recognition.html#a6de21bd4985e0f490c29c078ad0fb90c" title="parameters of the Weibull, scale then shape">parmhat</a>, <a class="code" href="class_meta_recognition.html#a6de21bd4985e0f490c29c078ad0fb90c" title="parameters of the Weibull, scale then shape">parmhat</a>+1,</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;                           <a class="code" href="class_meta_recognition.html#adbe803946c691c51104ab932c89266e6" title="confidence interval for parms scale high, scale low, shape high, shape low">parmci</a>,<a class="code" href="class_meta_recognition.html#adbe803946c691c51104ab932c89266e6" title="confidence interval for parms scale high, scale low, shape high, shape low">parmci</a>+1,</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;                           <a class="code" href="class_meta_recognition.html#adbe803946c691c51104ab932c89266e6" title="confidence interval for parms scale high, scale low, shape high, shape low">parmci</a>+2,<a class="code" href="class_meta_recognition.html#adbe803946c691c51104ab932c89266e6" title="confidence interval for parms scale high, scale low, shape high, shape low">parmci</a>+3,</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;                           &amp;<a class="code" href="class_meta_recognition.html#af25a4fe60686937baaf22aea1086c054" title="sign is postive is larger is better, negative means orginally smaller was better (we transformed for ...">sign</a>, &amp;<a class="code" href="class_meta_recognition.html#a6f5412431e6d17949d48ca2f0dcee437" title="parameter for estimation of size of confidence interval">alpha</a>, &amp;<a class="code" href="class_meta_recognition.html#a1023b0e67708b18ca86f7f0d22541c6d" title="tail size for fitting in any of the FitXX functions">fitting_size</a>,</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;                           &amp;<a class="code" href="class_meta_recognition.html#aca806c6373de29b8256427d0ab50148b" title="we transform data so all fittng data data is positive and bigger is better, this predefined constant ...">translate_amount</a>, &amp;<a class="code" href="class_meta_recognition.html#af64e8073cc0e2bb2bce44baae50261ad" title="the smallest score, so all fitting data is consistently postive. part of our transform">small_score</a>, &amp;<a class="code" href="class_meta_recognition.html#aa686c9468fbd68bc6bc13331cc536811" title="when fitting for recognition prediction, how many top score are hypothesized to be a match...">scores_to_drop</a>);</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;          <a class="code" href="class_meta_recognition.html#a0b25afe3e4095c6bf3184e3838b738e1" title="is the parameters in the object valid. private:">isvalid</a>=<span class="keyword">true</span>;</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;        }</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;}</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;</div>
<div class="line"><a name="l00397"></a><span class="lineno"><a class="code" href="class_meta_recognition.html#ab58e32224b68936eda97a33c56e3d70b">  397</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_meta_recognition.html#a8b0b10523b3180fc5ace82ac2fcba4bb" title="various I/O functions">MetaRecognition::Save</a>(<span class="keywordtype">char</span>* filename)<span class="keyword"> const</span></div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;  FILE*  fp = fopen(filename,<span class="stringliteral">&quot;w&quot;</span>);</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;  <span class="keywordflow">if</span>(fp) {</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    <a class="code" href="class_meta_recognition.html#a8b0b10523b3180fc5ace82ac2fcba4bb" title="various I/O functions">Save</a>(fp);</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    fclose(fp);</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span>(strlen(filename)&gt;0) </div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    fprintf(stderr,<span class="stringliteral">&quot;SaveWeibull could not open file |%s|\n&quot;</span>,filename);</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;  <span class="keywordflow">else</span>     fprintf(stderr,<span class="stringliteral">&quot;SaveWeibull called with null filename\n&quot;</span>);</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;}</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;</div>
<div class="line"><a name="l00408"></a><span class="lineno"><a class="code" href="class_meta_recognition.html#a1cc16fb0fb6717bcb6066d1e9edef7f3">  408</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_meta_recognition.html#acd1978cbb87cdda09fd5fc75927d48a2" title="various I/O functions">MetaRecognition::Load</a>(<span class="keywordtype">char</span>* filename){</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;  FILE*  fp = fopen(filename,<span class="stringliteral">&quot;r&quot;</span>);</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;  <a class="code" href="class_meta_recognition.html#a0b25afe3e4095c6bf3184e3838b738e1" title="is the parameters in the object valid. private:">isvalid</a>=<span class="keyword">false</span>;</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;  <span class="keywordflow">if</span>(fp) {</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;    <a class="code" href="class_meta_recognition.html#acd1978cbb87cdda09fd5fc75927d48a2" title="various I/O functions">Load</a>(fp);</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    <a class="code" href="class_meta_recognition.html#a0b25afe3e4095c6bf3184e3838b738e1" title="is the parameters in the object valid. private:">isvalid</a>=<span class="keyword">true</span>;</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;    fclose(fp);</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span>(strlen(filename)&gt;0) </div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;    fprintf(stderr,<span class="stringliteral">&quot;LoadWeibull could not open file |%s|\n&quot;</span>,filename);</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;  <span class="keywordflow">else</span>     fprintf(stderr,<span class="stringliteral">&quot;LoadWeibull called with null filename\n&quot;</span>);</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;}</div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Nov 2 2012 13:38:46 for Squirrel Pipeline by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.1.1
</small></address>
</body>
</html>
